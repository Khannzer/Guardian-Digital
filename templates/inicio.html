<!DOCTYPE html>
<html>
<head>
    <title>Login - Guardian Digital</title>

    <script src="https://code.jquery.com/jquery-3.3.1.min.js"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js"></script>

    <!-- Bootstrap Validator -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-validator/0.5.3/js/bootstrapValidator.min.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-validator/0.5.3/css/bootstrapValidator.min.css"/>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.5.0/css/all.css">
    <link rel="stylesheet" type="text/css" href="{{ url_for('static', filename='styleInicio.css')}}"/>
</head>

<body>

<div class="container h-100 d-flex justify-content-center align-items-center">
    <div class="login-card">

        <h3 class="login-title">Guardian Digital</h3>
        <p class="login-subtitle text-center">
            Bienvenido de nuevo üëã
        </p>

        <form id="loginForm" action="/login" method="POST">

            <div class="form-group">
                <label>Usuario</label>
                <div class="input-group input-moderno">
                    <div class="input-group-prepend">
                        <span class="input-group-text icon-moderno">
                            <i class="fas fa-user"></i>
                        </span>
                    </div>
                    <input type="text" 
                        name="txtNombre" 
                        class="form-control border-0" 
                        placeholder="Ingrese su usuario" 
                        required>
                </div>
            </div>

            <div class="form-group">
                <label>Contrase√±a</label>
                <div class="input-group input-moderno">
                    <div class="input-group-prepend">
                        <span class="input-group-text icon-moderno">
                            <i class="fas fa-lock"></i>
                        </span>
                    </div>
                    <input type="password" 
                        name="txtContrasenia" 
                        class="form-control border-0" 
                        placeholder="Ingrese su contrase√±a" required>
                </div>
            </div>

            <button type="submit" class="btn btn-login btn-block">
                Iniciar Sesi√≥n
            </button>

            <button type="button" 
                    class="btn btn-outline-secondary btn-block btn-secundario-moderno"
                    onclick="window.location.href='/registroUsuario'">
                Crear una cuenta
            </button>

        </form>

    </div>
</div>

</body>
<script>
    $(function () {

    const campos = $('input[name="txtNombre"], input[name="txtContrasenia"]');

    // 1Ô∏è‚É£ Bloquear tecla espacio
    campos.on('keydown', function(e) {
        if (e.key === " " || e.keyCode === 32) {
            e.preventDefault();
        }
    });

    // 2Ô∏è‚É£ Eliminar espacios mientras escribe o pega
    campos.on('keyup paste input', function() {
        let valorSinEspacios = this.value.replace(/\s+/g, '');
        if (this.value !== valorSinEspacios) {
            this.value = valorSinEspacios;
        }

        // Revalidar campo autom√°ticamente
        $('#loginForm').bootstrapValidator('revalidateField', $(this).attr('name'));
    });

});

    $(document).ready(function() {

    const campos = $('input[name="txtNombre"], input[name="txtContrasenia"]');

    // Eliminar espacios autom√°ticamente mientras escribe o pega
    campos.on('input', function() {
        this.value = this.value.replace(/\s+/g, '');
    });

    // Bootstrap Validator
    $('#loginForm').bootstrapValidator({
        fields: {

            txtNombre: {
                validators: {
                    notEmpty: {
                        message: 'El usuario es requerido'
                    },
                    stringLength: {
                        min: 4,
                        max: 20,
                        message: 'Debe tener entre 4 y 20 caracteres'
                    },
                    regexp: {
                        regexp: /^[a-zA-Z0-9_]+$/,
                        message: 'Solo puede contener letras, n√∫meros o guiones bajos'
                    }
                }
            },

            txtContrasenia: {
                validators: {
                    notEmpty: {
                        message: 'La contrase√±a es requerida'
                    },
                    stringLength: {
                        min: 3,
                        message: 'La contrase√±a debe tener m√≠nimo 3 caracteres'
                    },
                    regexp: {
                        regexp: /^[a-zA-Z0-9_]+$/,
                        message: 'Solo puede contener letras, n√∫meros o guiones bajos'
                    }
                }
            }

        }
    });

});
</script>
</html>